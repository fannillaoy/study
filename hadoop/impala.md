# impala

![å¨è¿éæå¥å¾çæè¿°](https://img-blog.csdnimg.cn/c493ceb00ac5448d8cf2dc0170180f10.png)

## 1. impala概述

### 1.1 简介

**==简介==：**==`Impala`==是一个==`MPP`==（大规模并行处理）==`SQL`==查询引擎

- 是一个用==`C ++`==和==`Java`==编写的开源软件；
- 用于处理存储在==`Hadoop`==集群中大量的数据；
- 性能最高的==`SQL`==引擎（提供类似==`RDBMS`==的体验），提供了访问存储在==`Hadoop`==分布式文件系统中的数据的最快方法。

### 1.2 impala优缺点

==**优点：**==

- 使用==`impala`==，用户可以使用传统的==`SQL`==知识以极快的速度处理存储在==`HDFS`==、==`HBase`==和==`Amazon s3`==中的数据中的数据，而无需了解==`Java`==（==`MapReduce`==作业）。
- 由于在数据驻留（在==`Hadoop`==集群上）时执行数据处理，因此在使用==`Impala`==时，不需要对存储在==`Hadoop`==上的数据进行数据转换和数据移动。

==**缺点：**==

- 不提供任何对序列化和反序列化的支持；
- 只能读取文本文件，而不能读取自定义二进制文件；
- 每当新的记录/文件被添加到`HDFS`中的数据目录时，该表需要被刷新。



## 2.impala框架

![å¨è¿éæå¥å¾çæè¿°](https://img-blog.csdnimg.cn/cb4c8b6957294f629020459298ec4387.png)

`impala`主要由以下三个组件组成：

- **Impala daemon（守护进程）**；
- **Impala Statestore（存储状态）**；
- **Impala元数据或metastore（元数据即元存储）**



### 2.1 Impalad（守护进程）

`daemon`安装在`Impala`的每个节点上运行，它接受来自各种接口的查询，然后将工作分发到`Impala`集群中的其它`Impala`节点来并行化查询，结果返回到中央协调节。

``可以将查询提交到专用Impalad或以负载平衡方式提交到集群中的另一Impalad``

### 2.2 Statestore（存储状态）

```Statestore```负责检查每个``Impalad``的运行状况，然后经常将每个``Impala Daemon``运行状况中继给其他守护程序，如果由于任何原因导致节点故障的情况下，``Statestore``将更新所有其他节点关于此故障，并且一旦此类通知可用于其他``Impalad``，则其他``Impala``守护程序不会向受影响的节点分配任何进一步的查询。

### 2.3 metadata（元数据）/metastore（元存储）

`Impala`使用传统的`MySQL`或`PostgreSQL`数据库来存储表定义和列信息这些元数据。

当表定义或表数据更新时，其它`Impala`后台进程必须通过检索最新元数据来更新其元数据缓存，然后对相关表发出新查询。

参看https://blog.csdn.net/qq_20042935/article/details/125079575